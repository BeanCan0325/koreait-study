-- employees라는 데이터베이스 선택-- 
use employees;

select emp_no, first_name from employees;
-- select * from employees; --* 안쓰는게 좋음 너무 많이옴 (필요없는 애들까지)-- 
select emp_no, birth_date from employees;
select emp_no, from_date, to_date from dept_manager;
select * from departments;


insert into employees
values (1,'2000-01-01','jaeseop','kim','M',now());

INSERT INTO departments 
VALUES ('d010','Korea IT Departmet');

INSERT INTO employees 
VALUES ('2','2002-01-01','Kil-dong','Hong','M',now());

INSERT INTO dept_emp   
VALUES ('1','d010',now(),'9999-01-01');

SELECT * FROM  dept_emp;

UPDATE employees
SET first_name = '랄랄랄'
WHERE emp_no = 10001;

SELECT * FROM employees;


UPDATE employees
SET last_name = '흥',
hire_date = now(),
WHERE emp_no = 10001;


UPDATE departments 
SET dept_name = 'Tech Sales'
WHERE dept_name = 'Sales';



SELECT * FROM departments;

UPDATE employees
SET birth_date = '1977-07-07'
WHERE last_name = 'Erie';

SELECT * FROM employees;

SELECT * FROM employees
WHERE last_name = 'Erie';


DELETE  FROM employees
WHERE emp_no =10005;
SELECT * FROM employees;

DELETE FROM employees 
WHERE hire_date = '1993-05-12';

SELECT * FROM employees WHERE emp_no = 28847;

DELETE FROM employees 
WHERE emp_no = 28847;


-- -- 
CREATE TABLE test_member (
member_id varchar(50) COMMENT '아이디',
member_pwd varchar(255) COMMENT '비밀번호',  -- 패스워드 긴 이유. 비번 암호화해서 저장하기 때문(길어짐) -- 
member_name varchar(50) COMMENT '이름', 
member_age TINYINT COMMENT '나이',
member_in_date datetime COMMENT '가입일',
);

SELECT * FROM test_member;

-- 실습 -- 
CREATE TABLE FREE_BOARD (
board_NO INT COMMENT '게시판 번호',
board_TITLE VARCHAR(100) COMMENT '게시판 제목',
board_CONTENT TEXT COMMENT '게시판 내용',
board_DATE DATETIME COMMENT '게시판 작성일',
board_VIEWS INT COMMENT '게시판 조회수'
);

SELECT * FROM free_board fb;

INSERT INTO free_board
values(1,'제목1','내용1',now(),3);

INSERT INTO free_board 
VALUES(2,'제목2','내용2', now(),4);

DROP TABLE test_member; -- 테이블 삭제 -- 


CREATE TABLE dda_alter_test (
	alter_id varchar(255),
	alter_name varchar(255),
	alter_as varchar(255)
);
-- 테이블 이름 변경 --
ALTER TABLE ddll_alter RENAME TO ddl_alter;

-- 테이블 구조 변경 (컬럼 변경 modify:수정) --
ALTER TABLE ddl_alter 
 MODIFY alter_as varchar(100);

-- 테이블 구조 변경 (컬럼 추가 add:추가)--
ALTER TABLE ddl_alter 
 ADD alter_pwd varchar(255);

-- 테이블 주고 변경 (컬럼 삭제: DROP:삭제)--
ALTER TABLE ddl_alter 
 DROP COLUMN alter_as;
-- 여기에 column 안쓰면 기본이 column설정 --

-- add constraint(제약조건) [제약조건 이름] --
-- UNIQUE(alter_name): 이름에 중복된 값이 들어가면 안됨 -- 
ALTER TABLE ddl_alter
 ADD CONSTRAINT alter_name_unique UNIQUE(alter_name);


-- 정보넣기 실습 --
INSERT INTO ddl_alter
 VALUES ('nirsa','김땡땡','qwer_1234!');
INSERT INTO ddl_alter 
 VALUES ('test','최냥냥','11111');
INSERT INTO ddl_alter 
 VALUES ('test2','최냥냥','2222');

SQL Error [1062], [23000]:
Duplicate entry '최냥냥' FOR KEY 'ddl_alter.alter_name_i_uniqueALTER '

ALTER TABLE ddl_alter 
 DROP CONSTRAINT alter_name_unique;

ALTER TABLE ddl_alter
 ADD CONSTRAINT alter_name_unique2 UNIQUE (alter_name);


-- 실습 --
CREATE TABLE test_employees(
	te_employee_id INT,
	te_first_name VARCHAR(50),
	te_last_name VARCHAR(50),
	te_salary int,
	te_department VARCHAR(50)
);

ALTER TABLE ddl_alter RENAME TO staff;

ALTER TABLE staff
 MODIFY te_department VARCHAR(100);

ALTER TABLE staff 
 ADD te_last_name VARCHAR(50);

ALTER TABLE staff
 RENAME COLUMN te_last_name TO surname;

ALTER TABLE staff
 DROP COLUMN te_first_name;

SELECT VERSION();

 